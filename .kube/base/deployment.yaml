apiVersion: apps/v1
kind: Deployment
metadata:
  name: "dashboard-svc"
  labels:
    app: dashboard-svc
spec:
  replicas: 1
  selector:
    matchLabels:
      app: dashboard-svc
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: "100%"
      maxUnavailable: 0
  template:
    metadata:
      labels:
        app: "dashboard-svc"
    spec:
      volumes:
        - name: feature-flags-volume
          emptyDir:
            sizeLimit: 500Mi
      containers:
        - name: "dashboard-svc"
          image: "nginx"
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: feature-flags-volume
              mountPath: /conf/k8s/feature-flags
          ports:
            - containerPort: 80
          env:
            - name: ENV
              value: dummy
            - name: I18NCLIENT_ADDRESS
              value: dummy
            - name: I18NCLIENT_PASSWORD
              value: dummy
            - name: REDIS_ADDRESS
              value: dummy
            - name: JAEGER_ADDRESS
              value: dummy
            - name: JAEGER_DISABLED
              value: dummy
            - name: REDIS_PASSWORD
              value: dummy
            - name: COGNITO_REGION
              value: dummy
            - name: COGNITO_POOLID
              value: dummy
            - name: COGNITO_CLIENTID
              value: dummy
            - name: ONFIDO_APITOKEN
              value: duumy
            - name: KAFKA_BOOTSTRAPSERVERS
              value: dummy
            - name: KYCESCLIENT_ENDPOINT
              value: duumy
            - name: KYCESCLIENT_USERNAME
              value: dummy
            - name: KYCESCLIENT_PASSWORD
              value: dummy
            - name: DASHBOARDESCLIENT_ENDPOINT
              value: dummy
            - name: DASHBOARDESCLIENT_USERNAME
              value: dummy
            - name: DASHBOARDESCLIENT_PASSWORD
              value: dummy
            - name: APP_PASSWORD
              value: dummy
            - name: WEALTHKERNEL_ENCRYPTSECRET
              value: dummy
            - name: CRYPT_HOST
              value: dummy
            - name: CRYPT_PORT
              value: dummy
            - name: S3_REGION
              value: dummy
      initContainers:
        - name: migratedb-up
          image: nginx
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: feature-flags-volume
              mountPath: /conf/k8s/feature-flags
          env:
            - name: ENV
              value: dummy
            - name: DASHBOARDESCLIENT_ENDPOINT
              value: dummy
            - name: DASHBOARDESCLIENT_USERNAME
              value: duumy
            - name: DASHBOARDESCLIENT_PASSWORD
              value: dummy
            - name: KYCESCLIENT_USERNAME
              value: dummy
            - name: KYCESCLIENT_PASSWORD
              value: dummy
